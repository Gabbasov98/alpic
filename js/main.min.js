$("._tab").click(function() {
    let parentBlock = $(this).parents("._tabs-parent")
    let tabId = $(this).attr("data-tab")
    $(parentBlock).find("._tab").removeClass("_active")
    $(this).addClass("_active")
    $(parentBlock).find(".m-tab-content").removeClass("_active")
    $(parentBlock).find(`.${tabId}`).addClass("_active")
})

$(".qa-card__show").click(function () {
    $(this).parents(".qa-card").toggleClass("_active")
    $(this).siblings(".qa-card__hidden").slideToggle()
})

$(window).on('load resize', function(){
    if ($(window).width() <= 577) {
        $('.catalog-item__top').insertBefore('.catalog-item__grid');
    } else{
        $('.catalog-item__top').insertBefore('.catalog-item__bottom');
    }
});
$(".burger").click(function () {
    $(".header").toggleClass("_open")
})

$("._toggle-auto-search").click(function () {
    if(window.innerWidth>992){
        $(".car-search").slideToggle();
    } else{
        $(".header").toggleClass("_open-form")
    }
})

$(".car-search__bg").click(function () {
    $(".header").removeClass("_open-form")
})

// $(document).mouseup( function(e){
//     let div = $( ".car-search" );
//     if ( !div.is(e.target)
//         && div.has(e.target).length === 0
//         && !div.hasClass("select2-container--open")
//     ) {
//         if($(".header").hasClass("_open-form")){
//             $(".header").removeClass("_open-form")
//         }
//     }
// });

$(document).mouseup( function(e){
    let div = $( ".header" );
    if ( !div.is(e.target)
        && div.has(e.target).length === 0 ) {
        if($(div).hasClass("_open")){
            $(div).removeClass("_open")
        }
    }
});

$(".nav-catalog__group-btn").click(function () {
    $(this).parents(".nav-catalog__group").toggleClass("_open")
    $(this).parents(".nav-catalog__group").find(".nav-catalog__group-hidden").slideToggle();
})

$(".header-search__field input").on("input",function () {
    if($(this).val().length > 3){
        $(".header-search").addClass("_show-variants");
    }else{
        $(".header-search").removeClass("_show-variants");
    }
})

$(document).mouseup( function(e){
    let div = $( ".header-search" );
    if ( !div.is(e.target)
        && div.has(e.target).length === 0 ) {
        if($(div).hasClass("_show-variants")){
            $(div).removeClass("_show-variants")
        }
    }
});
function Sliders() {
    let SlidersArray = []

    let sliders = document.querySelectorAll(".slider")
    sliders.forEach((slider,index) => {
        slider.setAttribute("data-slider-id",index)
        let isLoop = slider.classList.contains("_loop")
        let isAutoplay = slider.classList.contains("_autoplay")
        if(isAutoplay){
            isAutoplay = {
                delay: 3000
            }
        }

        SlidersArray[index] = new Swiper(`.slider[data-slider-id="${index}"] .swiper-container`, {
            slidesPerView: "auto",
            spaceBetween: 0,
            watchSlidesProgress: true,
            preventClicks :true,
            a11y: false,
            observer: true,
            observeParents: true,
            observeSlideChildren: true,
            loop: isLoop,
            autoplay: isAutoplay,
            navigation: {
                nextEl: `.slider[data-slider-id="${index}"] .swiper-button-next`,
                prevEl: `.slider[data-slider-id="${index}"] .swiper-button-prev`,
            },
            pagination: {
                el: `.slider[data-slider-id="${index}"] .swiper-pagination`,
                type: 'bullets',
                clickable: true,
            },
        })
    })
}

function gallery() {
    let SlidersArray = []

    let sliders = document.querySelectorAll(".gallery")
    sliders.forEach((slider,index) => {
        slider.setAttribute("data-slider-id",index)
        let gallery = {
            mySwiper: {},
            mySwiper2: {}
        }

        gallery.mySwiper = new Swiper(`.gallery[data-slider-id="${index}"] .mySwiper`, {
            spaceBetween: 0,
            slidesPerView: "auto",
            freeMode: true,
            watchSlidesProgress: true,
            direction: "vertical",
            breakpoints: {
                320: {
                    direction: "horizontal",
                },
                992: {
                    direction: "vertical",
                }
            }
        });
        gallery.mySwiper2 = new Swiper(`.gallery[data-slider-id="${index}"] .mySwiper2`, {
            spaceBetween: 0,
            direction: "vertical",
            loop: true,
            navigation: {
                nextEl: `.gallery[data-slider-id="${index}"] .swiper-button-next`,
                prevEl: `.gallery[data-slider-id="${index}"] .swiper-button-prev`,
            },
            thumbs: {
                swiper:  gallery.mySwiper,
            },
            breakpoints: {
                320: {
                    direction: "horizontal",
                },
                992: {
                    direction: "vertical",
                }
            }
        });

        SlidersArray[index] = gallery
    })

}


Sliders()
gallery()

let fileInput = document.querySelector("[data-upload-id='file-input']")

if(fileInput){
    console.log(fileInput)
    const upload = new FileUploadWithPreview.FileUploadWithPreview('file-input');

    upload.options.multiple = true

    $(document).on('change', '.input-container input', function(e) {
        $(this).parents(".file-input").addClass("_uploaded")
    })

    $(document).on('click', '.image-preview-item-clear', function(e) {
        let count = $(this).parents(".file-input").find(".image-preview-item").length
        if(count === 1){
            $(this).parents(".file-input").removeClass("_uploaded")
        }
    })
}



let maps = document.querySelectorAll("[data-cord1]")
if(maps.length > 0){
    // ymaps.ready(init);
}




function init2(map){
    maps.forEach(map=> {
        createMap(map)
    })

    function createMap(map){
        let cord = [+map.dataset.cord1, +map.dataset.cord2]

        let myMap = new ymaps.Map(map, {
            center: cord,
            zoom: +map.dataset.zoom,
            controls: []
        });

        myMap.behaviors.disable('scrollZoom');

        let placeMark = new ymaps.Placemark(cord, {
                balloonContentHeader: ``,
                balloonContentBody: `
                <div class="place-card">
                    <div class="office-card__items">
                        <div class="place-card__title">
                            Москва
                        </div>
                        <div class="place-card__desc">
                            АвтоФЕС
                        </div>
                        <div class="place-card__nav _flex">
                            <a href="">Подробнее</a>
                        </div>
                    </div>
                </div>
                `,
                balloonContentFooter: '',
                hintContent: '',
            },
            {
                iconLayout: 'default#image',
                iconImageHref: "img/marker.svg",
                iconImageSize: [48, 53],
                iconImageOffset: [-24, -26.5],
                hideIconOnBalloonOpen: false,
            }
        );
        myMap.geoObjects.add(placeMark);
    }
}

var getScrollBarSize = (function() {
    var el = window.document.createElement('textarea'), style = {
        'visibility': 'hidden', 'position': 'absolute', 'zIndex': '-2147483647',
        'top': '-1000px', 'left': '-1000px', 'width': '1000px', 'height': '1000px',
        'overflow': 'scroll', 'margin': '0', 'border': '0', 'padding': '0'
    }, support = el.clientWidth !== undefined && el.offsetWidth !== undefined;

    for (var key in style) {
        if (style.hasOwnProperty(key)) {
            el.style[key] = style[key];
        }
    }

    return function() {
        var size = null;
        if (support && window.document.body) {
            window.document.body.appendChild(el);
            size = [el.offsetWidth - el.clientWidth, el.offsetHeight - el.clientHeight];
            window.document.body.removeChild(el);
        }

        document.documentElement.style.setProperty('--scrollWidth', `${size[0]}px`);
        return size;
    };
})();


window.addEventListener('DOMContentLoaded', () => {
    fix100vh();
    window.addEventListener('resize', () => {
        fix100vh();
        getScrollBarSize()
        setPlaceholders()
    })
    setPlaceholders()
    getScrollBarSize()

    $('input[type="tel"]').mask('+7 (999) 999-99-99', { autoclear: false }, { placeholder: '+7 (   )    -  -  ' });
    // $(".m-select select").niceSelect()
    // $(".m-select li").click(function (){
    //     $(this).parents(".m-select").addClass("_is-selected");
    // })

    $('.js-select2').each(function (){
        $(this).select2({
            placeholder: $(this).attr('placeholder'),
            maximumSelectionLength: 2,
            language: "ru",
            allowClear: true,
            language: {
                noResults: function(){
                    return "Ничего не найдено";
                }
            },
        });
    })


})

function fix100vh() {
    let vh = window.innerHeight * 0.01;
    document.documentElement.style.setProperty('--vh', `${vh}px`);
}

function setPlaceholders(){
    $("[data-placeholder]").each(function (){
        $(this).attr("placeholder", $(this).attr("data-placeholder"));

        if(window.innerWidth<576){
            $(this).attr("placeholder", $(this).attr("data-placeholder-mob"));
        }
    })
}
//# sourceMappingURL=../sourcemaps/main.min.js.map
